<!DOCTYPE html>
<html>
<head>
  <title>{{ game }} Inventory</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  <h1>{{ game }} Inventory</h1>

  <button id="refresh-btn" class="btn">Refresh Inventory</button>

  <script>
    const btn = document.getElementById("refresh-btn");
    btn.addEventListener("click", async () => {
      btn.disabled = true;
      const game = new URLSearchParams(location.search).get("game");
      await fetch(`/inventory/refresh?game=${game}`, { method: "PUT" });
      location.reload();
    });
  </script>

  <div class="inventory-grid">
    {% for item in items %}
      {# Add class based on marketable status #}
      <div class="item-card {% if item.marketable %}marketable{% else %}not-marketable{% endif %}">
        <img src="{{ item.icon_url }}" alt="{{ item.name }}" class="item-icon" />
        <h2 class="item-name">{{ item.name }}</h2>
        <p>Tradable: {{ "Yes" if item.tradable else "No" }}</p>
        <p>Marketable: {{ "Yes" if item.marketable else "No" }}</p>
      </div>
    {% endfor %}
  </div>
</body>
</html>
